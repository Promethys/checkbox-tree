function d({state:c,options:l,indeterminateItems:a}){return{state:c,options:l,indeterminateItems:a,init(){this.$watch("state",()=>{this.updateIndeterminateStates()})},isChecked(t){return Array.isArray(this.state)&&this.state.includes(t)},isParentChecked(t){let e=this.getChildrenKeys(t);return e.length===0?this.isChecked(t):e.every(i=>this.isChecked(i))},isIndeterminate(t){let e=this.getChildrenKeys(t);if(e.length===0)return!1;let i=e.filter(s=>this.isChecked(s));return i.length>0&&i.length<e.length},toggleParent(t){let e=this.getChildrenKeys(t),i=!this.isParentChecked(t);if(Array.isArray(this.state)||(this.state=[]),i){let s=[t,...e].filter(n=>!this.state.includes(n));this.state=[...this.state,...s]}else{let s=[t,...e];this.state=this.state.filter(n=>!s.includes(n))}this.updateIndeterminateStates()},toggleChild(t){Array.isArray(this.state)||(this.state=[]),this.isChecked(t)?this.state=this.state.filter(i=>i!==t):this.state=[...this.state,t],this.updateParentState(t),this.updateIndeterminateStates()},updateParentState(t){let e=this.findParentKey(t);if(!e)return;let i=this.getChildrenKeys(e),s=i.every(h=>this.isChecked(h)),n=i.some(h=>this.isChecked(h)),r=this.isChecked(e);s&&!r?this.state=[...this.state,e]:!n&&r&&(this.state=this.state.filter(h=>h!==e)),this.updateParentState(e)},updateIndeterminateStates(){this.indeterminateItems=this.calculateIndeterminateItems(this.options)},calculateIndeterminateItems(t){let e=[];return Object.entries(t).forEach(([i,s])=>{if(s.children){let n=this.getChildrenKeysFromOption(s.children),r=n.filter(o=>this.isChecked(o));r.length>0&&r.length<n.length&&e.push(i);let h=this.calculateIndeterminateItems(s.children);e.push(...h)}}),e},getChildrenKeys(t){return this.findChildrenKeysInOptions(this.options,t)},findChildrenKeysInOptions(t,e){for(let[i,s]of Object.entries(t)){if(i===e&&s.children)return this.getChildrenKeysFromOption(s.children);if(s.children){let n=this.findChildrenKeysInOptions(s.children,e);if(n.length>0)return n}}return[]},getChildrenKeysFromOption(t){let e=[];return Object.entries(t).forEach(([i,s])=>{e.push(i),s.children&&e.push(...this.getChildrenKeysFromOption(s.children))}),e},findParentKey(t,e=null,i=null){e=e||this.options;for(let[s,n]of Object.entries(e))if(n.children){if(Object.keys(n.children).includes(t))return s;let r=this.findParentKey(t,n.children,s);if(r)return r}return null}}}window.checkboxTreeFormComponent=d;export{d as default};
